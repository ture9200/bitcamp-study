<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <title>연락처</title>
</head>
  <body>
    <h1>연락처</h1>
    <a href="form.html"> 새 연락처 </a>
    <table id="x-contact-tbl" border="1">
      <thead>
        <tr>
          <th>이름</th>
          <th>이메일</th>
          <th>전화</th>
          <th>회사</th>
        </tr>
        </thead>
        <tbody>
      </tbody>
    </table>

<script type="text/javascript">
  var tbody=  document.querySelector("#x-contact-tbl tbody");

  fetch("/contact/list").then(function (response){
    return response.json();
  }).then (function (arr) {

    for (var str of  arr) {
      console.log(str);
      var contact = str. split(",");
      //  예> ["홍길동1", "hong@test.com", "010-1111-2222", ""비트캠프"]
      //세 덩어리로 쪼개서 리턴한다.
    var tr= document. createElement("tr");
    tr.innerHTML = `<td><a href="view.html?email=${contact[1]}">${contact[0]}</a></td>
      <td>${contact[1]}</td>
      <td>${contact[2]}</td>
      <td>${contact[3]}</td>`;
      tbody.appendChild(tr);
  }
  });

</script>

  </body>
</html>
