<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>프로젝트1</title>
  </head>
  <body>
    <h1>음식메뉴</h1>
    <a href="form.html">음식 메뉴 등록</a>
    <table border = "1">
      <thead>
        <tr>
          <td>이름</td>
          <td>가격</td>
          <td>종류</td>
          <td>대/중/소</td>
          </tr>
      </thead>
      <tbody id="x-menulist">
     </tbody>
     </table>

     <script type = "text/javascript">

      var menulist = document.querySelector("#x-menulist")

      fetch("/food/list")
        .then(function(answer) {
          //서버에서 이응답이 오면 이함수 호출
      //    console.log(answer.json());
          return answer.json();
          //서버에서 받은 값을 json문자열로 parsing 해달라는뜻.
          //자바스크립트 객체로 만든것을 리턴해달라는 뜻
        })
        .then(function(menu) {
          for (var food of menu) {
            var values = food.split(",");
            var tr = document.createElement("tr");
            tr.innerHTML = `<td><a href="view.html?name=${values[0]}">${values[0]}</a></td>
            <td>${values[1]}</td>
            <td>${values[2]}</td>
            <td>${values[3]}</td>`;
            menulist.appendChild(tr);
          }
        });
    </script>
  </body>
</html>
