<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>변수활용</title>
</head>
<body>

<h1>배열 다루기</h1>
<button type="button" id="x-btn">배열 가져오기</button>
<ul id="x-namelist">
</ul>

<script>
var xNamelist= document. querySelector("#x-namelist");
var xBtn= document.querySelector("#x-btn");
 
 xBtn.addEventListener("click", function() {
	  var xhr= new XMLHttpRequest();
	  xhr.onload= function() { 
	    
	    xBtn.addEventListener("click", function () { 
	         var xhr = new XMLHTTPRequest();
	         xhr.onload = function() {
	         var names = JSON.parse(xhr.responseText);
	         
	      // 반복문을 직접 실행하는 대신에 그 일을 할 함수를 호출한다 
	      forEach(names, function(name) {
	    	  //names라는 배열과 함수를 주고 배열에서 값을 꺼낼때마다 함수 호출요청 
	    	  // 함수 호출할 때 마다 배열에서 꺼낸 값을 파라미터로 넘기는 것 
	    	  // 함수를 넘겨줄 때 값을 받을 변수를 선언하기 위해 name으로 했다. 
	          var li = document.createElement("li"); // <li></li>
	          li.innerHTML = name; // <li>홍길동</li>
	          xNamelist.appendChild(li);
	        });
	      };
	  xhr.open("GET","/lang/variable/exam4/test3", true);             
	  //서버에 요청 정보를 보낸다. 
	  xhr.send();
	  });

	    function forEach(arr, cb) {
	    	  // 각각에 대해서 반복문을 대신 돌려준다. 
	    	  // cb =콜백 함수 약자 
	    	  // forEach 라는 메서드를 호출하는데 첫번째 값으로 arr, 
	    	  // 두번째는 배열에서 값을 하나 꺼낼때마다 작업을 할 수 있도록 함수를 주세요 
	    	  // 예를들어, 배열이 5개면 함수를 5번 호출해준다. 즉, 배열에 들어있는 항목개수만큼 호출된다. 
	    	  for (var item of arr) {
	    		// 배열 함수를 주면 배열에 대해서 하나를 꺼내서 두번째 값으로 함수주소를 받겠다는 뜻 
	    	  }
	    	    cb(item);
	    	 // 함수를 받으면 대신 함수를 호출하는데 아이템으로 호출해줄게 이런 뜻 
	    	  }
	    	}  
</script>
</body>
</html>